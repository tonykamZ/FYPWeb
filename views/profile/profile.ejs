<head>
    <title>User profile</title>
    <style>
        .container {
            padding-top: 20px;
            padding-bottom: 100px;
        }

        #confirmButton,
        #cancelButton {
            display: none;
        }
    </style>

</head>

<body>


    <div class="container">
        <!-- member layout -->
        <% if(req.session.memberid){ %>
            <form action="/editProfile" method="POST">
                <!-- image -->
                <div>
                    <input type="image" readonly style="display: none;">
                </div>

                <!-- User info -->
                <div>
                    <h2><b> User information</b> <i class="far fa-user-circle"></i></h2>

                    <br>

                    <div class="form-group col-md-4">
                        <label><b>User name:</b></label>
                        <input class="form-control" value="<%= user.username %>" readonly>
                        <p><small>Connected to Gmail: <span class="iconify" data-icon="logos:google-gmail"></span> <b
                                    style="color: blue;">
                                    <%= user.connectedGmail %>
                                </b></small></p>
                    </div>

                    <div class="form-group col-md-2">
                        <label><b>Credit Score</b></label>
                        <input class="form-control" type="number" value="<%= user.creditScore %>" readonly>
                    </div>


                    <div class="form-group col-md-4">
                        <label><b>Nick Name</b></label>
                        <input class="form-control" type="text" id="nickname" name="nickname"
                            value="<%= user.profile.nickname %>" readonly>
                    </div>

                    <div class="form-group col-md-4">
                        <label><b>personal description</b></label>
                        <textarea rows="5" id="description" name="description" class="form-control"
                            readonly><%= user.profile.description %></textarea>
                    </div>

                </div>
                <% if(user.username==req.session.memberid){ %>
                    <!-- personal layout -->
                    <div class="button-group">
                        <button id="editButton" class="btn btn-outline-info" type="button" onclick="showEdit()">Edit
                            profile</button>




                        <button id="confirmButton" class="btn btn-outline-success" type="submit">Confirm</button>
                        <button id="cancelButton" class="btn btn-outline-secondary" type="button"
                            onclick="cancelEdit()">Cancel</button>



                        <a class="btn btn-outline-danger" href="/logout">Log out</a>
                    </div>
                    <!-- personal layout -->
                    <% }else{ %>
                        <!-- read others layout -->
                        <button class="btn btn-outline-danger" type="button" onclick="reportUser()">Report</button>
                        <!-- read others layout -->

                        <% } %>
            </form>
            <!-- member layout -->
            <% }else{ %>
                <!-- visitor layout -->

                <h3><a href="/login">Login <li class="tag__item" style="cursor: pointer;"><i class="fas fa-sign-in-alt mr-2"></i></li></a> to browse user's information</h3>
                <!-- should store url session to nav back later -->

                <!-- visitor layout -->
                <% } %>

    </div>

</body>

<script>

    function showEdit() {
        // enable input fields 
        document.getElementById("nickname").readOnly = false;
        document.getElementById("description").readOnly = false;

        // hide edit button
        document.getElementById("editButton").style.display = "none";


        // show confirm button & cancel button
        document.getElementById("confirmButton").style.display = "inline";
        document.getElementById("cancelButton").style.display = "inline";
    }

    function cancelEdit() {
        // refresh the page
        window.location.replace("/profile");
    }

    function reportUser() {
        alert("not yet developed~");
    }

</script>